Object.defineProperty(Array.prototype,"pluck",{value:function(a){return this.map(function(b){return b[a]})}}),function(){"use strict";var a=function(){var a={},b=location.href.indexOf("?");if(b==-1)return a;var c=location.href.slice(b+1);if(0==c.length)return a;c=c.split("&");for(var b=0;b<c.length;b++){var d=c[b].split("=");a[d[0]]=d[1]}return a},b=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}return null},c=function(a){var b="";for(var c in a)b+=c+"="+a[c]+"&";return b.substring(0,b.length-1)},d=function(a){return Number(parseFloat(a))==a},e={sidebarActive:!1,notificationActive:!1,disableAction:!1,userExtraInfo:!1,paginationPage:1,modelId:0,notifications:[],unreadNotificationCount:0,groupDeleteAction:"move",request:{start_date:null,start_time:null,end_date:null,end_time:null,form:{sick_leave:{reason:null}}},modals:{alert:!0,confirm:!1,confirm2:!1,helpBox:!1,loading:!1},buttons:{approveLoading:!1,disapproveLoading:!1}},f={requestBalance:function(){if(!(this.request.start_date&&this.request.start_time&&this.request.end_date&&this.request.end_time))return 0;var a=new Date(this.request.start_date+" "+this.request.start_time),b=new Date(this.request.end_date+" "+this.request.end_time),c=b.getDate()-a.getDate(),d=a.getHours()+a.getMinutes()/6/10,e=b.getHours()+b.getMinutes()/6/10;return c<0?0:(e-d<4&&(c+=.5),e-d>=4&&(c+=1),c)}},g={toggleNav:function(){this.isNavActive=!this.isNavActive},setFormId:function(a){this.modelId=a},changePaginationPage:function(){var b=a();b.page=this.paginationPage,location=location.pathname+"?"+c(b)},submitForm:function(a){document.getElementById(a).submit()},getNotifications:function(){this.$http.get("/account/notifications").then(function(a){this.notificationActive||(this.unreadNotificationCount=a.body.unread_count);for(var b=a.body.entries.length-1;b>=0;b--){var c=this.notifications.filter(function(c){return c.id==a.body.entries[b].id});c.length>0||this.notifications.unshift(a.body.entries[b])}})},toggleNotifications:function(){if(this.notificationActive=!this.notificationActive,this.unreadNotificationCount=0,this.notificationActive){for(var a=0,b=0;b<this.notifications.length;b++)null==this.notifications[b].read_at&&(this.notifications[b].read_at=new Date,a++);a>0&&this.$http.post("/account/notifications/read",{ids:this.notifications.pluck("id")})}},dismissNotification:function(a){this.notifications.splice(a,1)},formatTime:function(a){return timeago().format(a)},printDocument:function(){window.print()},location:function(a){window.location=a}};Vue.component("modal",{template:"#modal-template",props:{show:{type:Boolean,required:!0,twoWay:!0}},methods:{escapeClose:function(a){this.show&&27==a.keyCode&&(this.show=!1)}},ready:function(){document.addEventListener("keydown",this.escapeClose)}});var h=new Vue({el:"#app",data:e,methods:g,computed:f}),i=b("page");d(i)&&h.$set(e,"paginationPage",i),isLoggedIn&&(h.getNotifications(),setInterval(h.getNotifications,3e4))}();